\documentclass[12pt, letterpaper]{article}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{geometry} % Adjust margins if needed
\usepackage{graphicx} % For including images
\usepackage{booktabs} % For better-looking tables
\usepackage{tabularx}
\usepackage{array}
\usepackage{enumitem}
\usepackage{longtable}
% Define background color for command code
\definecolor{codebackground}{HTML}{EAEAEA}

\title{How to use Neovim Arabic in Windows}
\author{Fatima Zohra Mezerreg}
\date{14th April 2024}
\begin{document}
\maketitle

\section{Introduction}
\paragraph{	\normalfont{In our roles as developers, we rely on a diverse array of tools, from code editors to documentation platforms. Consequently, our workflow often involves installing numerous applications to facilitate various tasks. But what if there was a single tool capable of handling all our needs proficiently? Wouldn't that be great?}}
\paragraph{\normalfont{ Enter Neovim - a versatile solution that functions not only as a code editor but also as a text editor, eliminating the need for heavyweight applications like Microsoft Word or Google Docs. It allows for the creation of visually appealing documents effortlessly.}}
\paragraph{\normalfont{Now, you might wonder: Can Neovim support Arabic language for document writing? The answer is a resounding yes! Neovim boasts robust support for Arabic writing. However, the question remains: Does it match the effectiveness of other text editors that offer Arabic support? And is it equally user-friendly for Windows users like myself?}}
\paragraph{\normalfont{In this article, I will delve into Neovim Arabic, putting its capabilities to the test and comparing it with other text editors to provide answers to these questions.}}

\section{Install and configure Neovim on windows}

\subsection{Installation}
To install Neovim on Windows, there are two different methods.
\subsubsection{Using WSL}
If you are familiar with Linux, you can install Neovim in a Linux distribution via WSL. To do this:
\begin{itemize}
\item Ensure that WSL is enabled and functioning on your windows system.
\item Excute the following command to install Neovim: 
\begin{lstlisting}[language=bash,backgroundcolor=\color{codebackground} ]
sudo apt-get install neovim
\end{lstlisting}
\item Verify that Neovim is successfully installed by running:
\begin{lstlisting}[language=bash, backgroundcolor=\color{codebackground}] 
nvim -help 
\end{lstlisting}
\end{itemize}

\subsubsection{Using the Windows version of Neovim}
\begin{itemize}
  \item The simplest way to install Neovim is by visiting the official website and downloading the Neovim \texttt{'.msi'} file.
  \item Double-click the downloaded file to initiate the installation process.
  \item Follow the on-screen instructions to complete the installation. This process will only take a few minutes.
  \item Once the installation is complete, verify that Neovim is functioning properly by performing one of the following:
  \begin{itemize}
    \item Open Neovim from the shortcut icon on your desktop, if available.
    \item Navigate to the folder where Neovim is installed and open \texttt{`nvim-qt.exe`} located in the \texttt{`bin`} folder.
  \end{itemize}
  \item This will open a terminal window displaying the Vim editor interface, confirming that Neovim is installed and operational on your Windows system.
\end{itemize}

Congratulations!! you have successfully installed Neovim on your Windows system.
\subsection{Configuration}
After installing Neovim, you can customize its behavior in two ways: either by configuring the initial settings such as line numbering and indentation, or by adding plugins to enhance its appearance and functionality.

All of these configurations are stored in the \texttt{init.vim} file. Here's where you can locate this file in both WSL and Windows:

\subsubsection{For WSL:}
You'll find the \texttt{init.vim} file in the \texttt{\~/.config/nvim} directory. If it doesn't exist, you can create it by following these steps:
\begin{enumerate}
    \item Open a terminal.
    \item Run the following commands:
    \begin{verbatim}
        mkdir -p ~/.config/nvim
        touch ~/.config/nvim/init.vim
    \end{verbatim}
    \item Then, open the \texttt{init.vim} file in Neovim to make your configuration changes by running:
    \begin{verbatim}
        nvim ~/.config/nvim/init.vim
    \end{verbatim}
\end{enumerate}

\subsubsection{For Windows:}
You can find the \texttt{init.vim} file in the \texttt{'Users\textbackslash Your User Name\textbackslash AppData\textbackslash Local\textbackslash nvim'} directory. Similarly, if it doesn't exist, you can create it manually.

Once you have the \texttt{init.vim} file open in Neovim, you can start customizing your editor's settings and adding plugins to tailor it to your preferences.


\paragraph{ \normalfont{\textit{I understand that you may encounter similar steps in various articles and videos. However, I'm providing them here because many existing resources often fail to clearly explain for beginners (like myself) where to locate the init.vim file and the .config folder in both WSL and Windows environments. It can be frustrating if these directories don't exist, leaving you unsure of what to do next. You may end up, like me, wasting precious time searching for them. Therefore, I hope these detailed instructions can help alleviate any confusion and save you time in the process.}}}

\section{Using arabic in Neovim}

It's widely known that programming and displaying Arabic text correctly can be challenging. This is due to its unique features, such as right-to-left directionality and the complex shaping of letters, which vary depending on their position within a word. Consequently, typing Arabic often presents significant difficulties, particularly in code editors or terminals editors like Vim. However, Vim has made notable advancements in supporting Arabic text, which we'll explore next.

\subsection{Enable arabic setting}
The first step you need to take to use Arabic in Neovim is to enable the appropriate character encoding by typing: \texttt{:set encoding=utf-8}.

Then, To enable Arabic support in Neovim, you have three methods:

\begin{enumerate}
    \item \textbf{First method}:
    
    To start typing in Arabic with all its characteristics, simply enter the "\texttt{:set arabic}" command. This command triggers several changes:
    \begin{itemize}
        \item It sets the appropriate keymap for Arabic input.
        \item It enables the deletion of single combined pair characters.
        \item It activates right-to-left (RTL) mode.
        \item It enables RTL command mode.
        \item It enables Arabic shaping mode, allowing visual character alterations.
    \end{itemize}
    
    You can disable Arabic support by using the "\texttt{:set noarabic}" command, which resets all settings related to Arabic, including the keymap, direction, and shape.
    
    \item \textbf{Second method}:
    
    Alternatively, you can enable Arabic settings using a combination of commands:
    \begin{itemize}
        \item ``\texttt{:set keymap=arabic}'' activates the Arabic keymap. You can toggle between Arabic and English keymaps using 'Ctrl-\textasciicircum'. The Neovim terminal displays the current mapping as ``insert arabic'' for Arabic and ``insert'' for Latin.
        
        \item "\texttt{:set rl}" or "\texttt{:set rightleft}" changes the direction to RTL.
        \item "\texttt{:set arabicshape}" activates the necessary visual character alterations required for Arabic language support, including shaping, composing, and combining.
    \end{itemize}

    \item \textbf{Third method}:

You can simply enable arabic setting in nvim by just opening your file in arabic mode using this command: "\texttt{nvim -R your-arabic-filename}"

\end{enumerate}

\subsection{Setting the Arabic fonts}

You can set any Arabic font you prefer when writing in Neovim by typing:
\begin{center}
\begin{verbatim}
:set guifont=your_ARABIC_FONT
\end{verbatim}
\end{center}
For example, if you wish to use Amiri with a size of 11, enter the following command:
\begin{center}
\begin{verbatim}
:set guifont=Amiri:h11
\end{verbatim}
\end{center}

However, this command may not work if you are using nvim-qt. In this case, use the following command to resolve the issue:
\begin{center}
\begin{verbatim}
:Guifont! Amiri:h11
\end{verbatim}
\end{center}

Before utilizing any font, ensure that it is successfully installed on your Windows system.



\paragraph{You can save all these settings in your \texttt{init.vim} file if you want Neovim to always open with these configurations.}


 \section{My Observations on Arabic in Windows Terminals}

When I initially used Neovim on Windows, I opened it in the Windows Command Prompt. The outcome was disappointing as it displayed question mark characters instead of Arabic letters. Subsequently, I installed other terminals to identify the optimal one for Arabic writing.

I have observed various behaviors of Arabic text rendering in different terminals on Windows. Below is a summary of my findings:

\begin{longtable}{|c|p{10cm}|}
    
    \hline
    \textbf{Terminal} & \textbf{Observations} \\
    \hline
    \centering Hyper &
    \begin{itemize}[leftmargin=*]
        \item Arabic displays well with default monospace fonts like Menlo, "DejaVu Sans Mono", Consolas, and "Lucida Console", as well as with the Arabic monospace font Kwakab Mono.
        \item Some Arabic fonts like Amiri and Cairo introduce spacing issues.
        \item Lacks bidirectional support (English words may appear reversed).
        \item Configuration is straightforward: open the configuration file using 'CTRL- ,'.
    \end{itemize}
    This picture shows the results of writing arabic in hyper with 'Courier' monospace font:\newline
 

    \includegraphics[width=10cm]{images/hyper.png}

\\
    \hline
    \centering Cmder &
    \begin{itemize}
        \item Arabic appears perfectly in the terminal itself, but when using nvim, it displays question marks instead of Arabic letters. Even when Arabic letters are displayed, the shape may be distorted, resembling cmd and PowerShell behavior.
        \item Changing the font to Courier and setting the font charset to Arabic improves Arabic display significantly.
        \item Configuration is simple: right-click on the title bar at the top of the Cmder window, select "Settings" from the context menu.
    \end{itemize}

    Arabic in Cmder with 'Courier' font:\newline

    \includegraphics[width=10cm]{images/Cmdercourier.png}\newline

    Arabic in Cmder with 'Kawkab Mono' arabic font:\newline

    \includegraphics[width=10cm]{images/cmdernvim.png}

\\
    \hline
    \centering Cmd \& PowerShell &
    \begin{itemize}
        \item Only a few fonts display Arabic characters in cmd: Courier, which is the best option, Simplified Arabic Fixed, though some letters may appear as rectangular symbols, and Kawkab Mono.
        \item Configuration is straightforward, with limited options available.
        \item Only monospace fonts are supported.
        \item Bidirectional support is lacking.
    \end{itemize} 
    \includegraphics[width=10cm]{images/cmdcourier.png}

\\
    \hline
    Neovim QT &
    \begin{itemize}
        \item Arabic characters display well with monospace fonts, particularly with Courier, showcasing a good shape.
        \item However, when using Arabic fonts, there are noticeable spaces between letters. Among the Arabic fonts tested, only Kwakab Mono, a monospace font, renders perfectly.
        \item Bidirectional text support is lacking.
        \item Configuration is straightforward, primarily relying on commands for customization.
    \end{itemize}

    Arabic in nvim-qt using 'Courier' font:\newline

    \includegraphics[width=10cm]{images/nvimqt.png}

    Arabic in nvim-qt using 'Droid arabic Kufi' font:\newline

  \includegraphics[width=10cm]{images/droidkufi.png}

    \\
    \hline
    mlterm &
    \begin{itemize}
        \item Arabic characters are rendered elegantly with monospace fonts, notably with Kawkab Mono and Droid Arabic Kufi.
        \item One standout feature of mlterm is its bidirectional text support, allowing seamless integration of English text within Arabic text without any word inversions, unlike other terminals.
        \item Configuration is easy and intuitive. Accessing the configuration menu is as simple as typing 'CTRL' and clicking the right button of the mouse.
    \end{itemize}

    \includegraphics[width=10cm]{images/mlterm.png}

    \\
    \hline
    
    \caption{Summary of Observations on Arabic in Windows Terminals}
    \label{tab:observations}
\end{longtable}


In summary, after examining how different terminals handle Arabic text, we found that Neovim QT and mlterm have their strengths and weaknesses. Neovim QT displays Arabic text decently with certain fonts but struggles with spacing and lacks bidirectional support. On the other hand, mlterm excels in rendering Arabic text accurately, especially with monospace fonts, and it supports bidirectional text well. Overall, mlterm seems to be the better choice for users looking for reliable Arabic text support and easy configuration. 

\section{Conclusion}
In conclusion, Neovim can support Arabic language for document writing, but the user experience may vary depending on the terminal used. Users seeking reliable Arabic text support may find mlterm to be a better choice due to its accurate rendering and bidirectional text support. However, advancements in technology may lead to improvements in Arabic text handling across terminals in the future.
\end{document}
